package data

import "context"

//Transaction is query interface
type Transaction interface {
	// Get data object from data store, return ErrNotFound if object not exist
	//
	//	greet := &Greet{}
	//	greet.SetID(greet1.ID())
	//	err = db.Transaction(ctx, func(ctx context.Context, tx Transaction) error {
	//		tx.Get(ctx,"","greet_id", &greet)
	//		return nil
	//	})
	//
	Get(ctx context.Context, namespace, tablename, id string, obj Object) (Object, error)

	// Set object into data store
	//
	//	greet1 := &Greet{
	//		From:        "1",
	//		Description: "1",
	//	}
	//	err := db.Transaction(ctx, func(ctx context.Context, tx Transaction) error {
	//		tx.Put(ctx, greet1)
	//		return nil
	//	})
	Set(ctx context.Context, namespace, tablename string, obj Object) error

	// Delete data object from firestore
	//
	//	err := db.Transaction(ctx, func(ctx context.Context, tx Transaction) error {
	//		tx.Delete(ctx, greet)
	//		return nil
	//	})
	//
	Delete(ctx context.Context, namespace, tablename, id string) error

	// ShortID create unique serial number, please be aware serial can only generate one number per second and use with transation to ensure unique
	//
	//	id,err = db.ShortID(ctx, "myID")
	//
	Serial(ctx context.Context, namespace, tablename, countername string) (int, error)
}

// AbstractTransaction is parent class for all DB child
type AbstractTransaction struct {
	Transaction
}
